!function(){function t(t){return t&&t.__esModule?t.default:t}var e=function(){for(var t,e,a=0,r="",o=arguments.length;a<o;a++)(t=arguments[a])&&(e=function t(e){var a,r,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e){if(Array.isArray(e)){var s=e.length;for(a=0;a<s;a++)e[a]&&(r=t(e[a]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r)}return o}(t))&&(r&&(r+=" "),r+=e);return r},a={};!function(t){function e(t,e){var a=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(a>>16)<<16|65535&a}function r(t,a,r,o,s,l){var n;return e((n=e(e(a,t),e(o,l)))<<s|n>>>32-s,r)}function o(t,e,a,o,s,l,n){return r(e&a|~e&o,t,e,s,l,n)}function s(t,e,a,o,s,l,n){return r(e&o|a&~o,t,e,s,l,n)}function l(t,e,a,o,s,l,n){return r(e^a^o,t,e,s,l,n)}function n(t,e,a,o,s,l,n){return r(a^(e|~o),t,e,s,l,n)}function i(t,a){t[a>>5]|=128<<a%32,t[(a+64>>>9<<4)+14]=a;var r,i,c,d,h,u=1732584193,p=-271733879,f=-1732584194,b=271733878;for(r=0;r<t.length;r+=16)i=u,c=p,d=f,h=b,u=o(u,p,f,b,t[r],7,-680876936),b=o(b,u,p,f,t[r+1],12,-389564586),f=o(f,b,u,p,t[r+2],17,606105819),p=o(p,f,b,u,t[r+3],22,-1044525330),u=o(u,p,f,b,t[r+4],7,-176418897),b=o(b,u,p,f,t[r+5],12,1200080426),f=o(f,b,u,p,t[r+6],17,-1473231341),p=o(p,f,b,u,t[r+7],22,-45705983),u=o(u,p,f,b,t[r+8],7,1770035416),b=o(b,u,p,f,t[r+9],12,-1958414417),f=o(f,b,u,p,t[r+10],17,-42063),p=o(p,f,b,u,t[r+11],22,-1990404162),u=o(u,p,f,b,t[r+12],7,1804603682),b=o(b,u,p,f,t[r+13],12,-40341101),f=o(f,b,u,p,t[r+14],17,-1502002290),p=o(p,f,b,u,t[r+15],22,1236535329),u=s(u,p,f,b,t[r+1],5,-165796510),b=s(b,u,p,f,t[r+6],9,-1069501632),f=s(f,b,u,p,t[r+11],14,643717713),p=s(p,f,b,u,t[r],20,-373897302),u=s(u,p,f,b,t[r+5],5,-701558691),b=s(b,u,p,f,t[r+10],9,38016083),f=s(f,b,u,p,t[r+15],14,-660478335),p=s(p,f,b,u,t[r+4],20,-405537848),u=s(u,p,f,b,t[r+9],5,568446438),b=s(b,u,p,f,t[r+14],9,-1019803690),f=s(f,b,u,p,t[r+3],14,-187363961),p=s(p,f,b,u,t[r+8],20,1163531501),u=s(u,p,f,b,t[r+13],5,-1444681467),b=s(b,u,p,f,t[r+2],9,-51403784),f=s(f,b,u,p,t[r+7],14,1735328473),p=s(p,f,b,u,t[r+12],20,-1926607734),u=l(u,p,f,b,t[r+5],4,-378558),b=l(b,u,p,f,t[r+8],11,-2022574463),f=l(f,b,u,p,t[r+11],16,1839030562),p=l(p,f,b,u,t[r+14],23,-35309556),u=l(u,p,f,b,t[r+1],4,-1530992060),b=l(b,u,p,f,t[r+4],11,1272893353),f=l(f,b,u,p,t[r+7],16,-155497632),p=l(p,f,b,u,t[r+10],23,-1094730640),u=l(u,p,f,b,t[r+13],4,681279174),b=l(b,u,p,f,t[r],11,-358537222),f=l(f,b,u,p,t[r+3],16,-722521979),p=l(p,f,b,u,t[r+6],23,76029189),u=l(u,p,f,b,t[r+9],4,-640364487),b=l(b,u,p,f,t[r+12],11,-421815835),f=l(f,b,u,p,t[r+15],16,530742520),p=l(p,f,b,u,t[r+2],23,-995338651),u=n(u,p,f,b,t[r],6,-198630844),b=n(b,u,p,f,t[r+7],10,1126891415),f=n(f,b,u,p,t[r+14],15,-1416354905),p=n(p,f,b,u,t[r+5],21,-57434055),u=n(u,p,f,b,t[r+12],6,1700485571),b=n(b,u,p,f,t[r+3],10,-1894986606),f=n(f,b,u,p,t[r+10],15,-1051523),p=n(p,f,b,u,t[r+1],21,-2054922799),u=n(u,p,f,b,t[r+8],6,1873313359),b=n(b,u,p,f,t[r+15],10,-30611744),f=n(f,b,u,p,t[r+6],15,-1560198380),p=n(p,f,b,u,t[r+13],21,1309151649),u=n(u,p,f,b,t[r+4],6,-145523070),b=n(b,u,p,f,t[r+11],10,-1120210379),f=n(f,b,u,p,t[r+2],15,718787259),p=n(p,f,b,u,t[r+9],21,-343485551),u=e(u,i),p=e(p,c),f=e(f,d),b=e(b,h);return[u,p,f,b]}function c(t){var e,a="",r=32*t.length;for(e=0;e<r;e+=8)a+=String.fromCharCode(t[e>>5]>>>e%32&255);return a}function d(t){var e,a=[];for(e=0,a[(t.length>>2)-1]=void 0;e<a.length;e+=1)a[e]=0;var r=8*t.length;for(e=0;e<r;e+=8)a[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return a}function h(t){var e,a,r="0123456789abcdef",o="";for(a=0;a<t.length;a+=1)o+=r.charAt((e=t.charCodeAt(a))>>>4&15)+r.charAt(15&e);return o}function u(t){return unescape(encodeURIComponent(t))}function p(t){var e;return c(i(d(e=u(t)),8*e.length))}function f(t,e){return function(t,e){var a,r,o=d(t),s=[],l=[];for(s[15]=l[15]=void 0,o.length>16&&(o=i(o,8*t.length)),a=0;a<16;a+=1)s[a]=909522486^o[a],l[a]=1549556828^o[a];return r=i(s.concat(d(e)),512+8*e.length),c(i(l.concat(r),640))}(u(t),u(e))}function b(t,e,a){return e?a?f(e,t):h(f(e,t)):a?p(t):h(p(t))}"function"==typeof define&&define.amd?define(function(){return b}):a?a=b:t.md5=b}(a);let r=Object.getPrototypeOf,o,s,l,n,i={isConnected:1},c,d={},h=r(i),u=r(r),p,f=(t,e,a,r)=>(t??(setTimeout(a,r),new Set)).add(e),b=(t,e,a)=>{let r=l;l=e;try{return t(a)}catch(t){return console.error(t),a}finally{l=r}},m=t=>t.filter(t=>t._dom?.isConnected),g=t=>c=f(c,t,()=>{for(let t of c)t._bindings=m(t._bindings),t._listeners=m(t._listeners);c=p},1e3),x={get val(){return l?._getters?.add(this),this.rawVal},get oldVal(){return l?._getters?.add(this),this._oldVal},set val(v){l?._setters?.add(this),v!==this.rawVal&&(this.rawVal=v,this._bindings.length+this._listeners.length?(s?.add(this),o=f(o,this,M)):this._oldVal=v)}},w=t=>({__proto__:x,rawVal:t,_oldVal:t,_bindings:[],_listeners:[]}),y=(t,e)=>{let a={_getters:new Set,_setters:new Set},r={f:t},o=n;n=[];let s=b(t,a,e);for(let t of(s=(s??document).nodeType?s:new Text(s),a._getters))a._setters.has(t)||(g(t),t._bindings.push(r));for(let t of n)t._dom=s;return n=o,r._dom=s},_=(t,e=w(),a)=>{let r={_getters:new Set,_setters:new Set},o={f:t,s:e};for(let s of(o._dom=a??n?.push(o)??i,e.val=b(t,r,e.rawVal),r._getters))r._setters.has(s)||(g(s),s._listeners.push(o));return e},S=(t,...e)=>{for(let a of e.flat(1/0)){let e=r(a??0),o=e===x?y(()=>a.val):e===u?y(a):a;o!=p&&t.append(o)}return t},C=(t,e,...a)=>{let[o,...s]=r(a[0]??0)===h?a:[{},...a],l=t?document.createElementNS(t,e):document.createElement(e);for(let[t,a]of Object.entries(o)){let o=e=>e?Object.getOwnPropertyDescriptor(e,t)??o(r(e)):p,s=e+","+t,n=d[s]??=o(r(l))?.set??0,i=t.startsWith("on")?(e,a)=>{let r=t.slice(2);l.removeEventListener(r,a),l.addEventListener(r,e)}:n?n.bind(l):l.setAttribute.bind(l,t),c=r(a??0);t.startsWith("on")||c===u&&(a=_(a),c=x),c===x?y(()=>(i(a.val,a._oldVal),l)):i(a)}return S(l,s)},$=t=>({get:(e,a)=>C.bind(p,t,a)}),E=(t,e)=>e?e!==t&&t.replaceWith(e):t.remove(),M=()=>{let t=0,e=[...o].filter(t=>t.rawVal!==t._oldVal);do for(let t of(s=new Set,new Set(e.flatMap(t=>t._listeners=m(t._listeners)))))_(t.f,t.s,t._dom),t._dom=p;while(++t<100&&(e=[...s]).length)let a=[...o].filter(t=>t.rawVal!==t._oldVal);for(let t of(o=p,new Set(a.flatMap(t=>t._bindings=m(t._bindings)))))E(t._dom,y(t.f,t._dom)),t._dom=p;for(let t of a)t._oldVal=t.rawVal};var T={tags:new Proxy(t=>new Proxy(C,$(t)),$()),hydrate:(t,e)=>E(t,y(e,t)),add:S,state:w,derive:_},A={};function k(t,e,a){return Math.min(Math.max(t,e),a)}function F(e,a=""){return t(A).get(e)||a}function U(t){return new Promise(e=>{setTimeout(e,t)})}A=function(){function t(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)t[r]=a[r]}return t}return function e(a,r){function o(e,o,s){if("undefined"!=typeof document){"number"==typeof(s=t({},r,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var n in s)s[n]&&(l+="; "+n,!0!==s[n]&&(l+="="+s[n].split(";")[0]));return document.cookie=e+"="+a.write(o,e)+l}}return Object.create({set:o,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var e=document.cookie?document.cookie.split("; "):[],r={},o=0;o<e.length;o++){var s=e[o].split("="),l=s.slice(1).join("=");try{var n=decodeURIComponent(s[0]);if(r[n]=a.read(l,n),t===n)break}catch(t){}}return t?r[t]:r}},remove:function(e,a){o(e,"",t({},a,{expires:-1}))},withAttributes:function(a){return e(this.converter,t({},this.attributes,a))},withConverter:function(a){return e(t({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(a)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}();var V={get target(){return F("dxf-proxy-target")},get project(){return{name:F("dxf-project-name")}},get container(){return{name:F("dxf-container-name")}}};class j{}class I extends j{async init(){try{let t=await import(`/${V.target}/app/ui.js`);this._module=t.default}catch(t){return console.error("Failed to load VNC module",t),!1}return!0}async handle(){try{if(!this._module)throw Error("Module not loaded");for(let t=0;t<10&&!this._module.connected;t++)await U(2500);if(!this._module.connected)throw Error("Not connected");this._module.rfb.addEventListener("clipboard",t=>{this.clipboard.receive&&this.clipboard.receive(t?.detail?.text)})}catch(t){return console.error("Failed to VNC handle",t),!1}return await U(500),!0}constructor(...t){super(...t),this.clipboard={enable:!0,send:t=>{this._module.rfb.clipboardPasteFrom(t)},receive:t=>{}},this.storage={enable:!0}}}class P extends j{async init(){return!0}async handle(){return await U(2500),!0}constructor(...t){super(...t),this.clipboard={enable:!1},this.storage={enable:!1}}}let{div:L,a:D,span:N,small:B,img:R,input:W,textarea:q}=T.tags,{svg:G,path:O}=T.tags("http://www.w3.org/2000/svg"),H=new class{constructor(t){return(this.loading={enable:T.state(!0),visible:T.state(!0)},this.area={enable:T.state(!1),visible:T.state(!1)},this.namespace={name:T.state(""),currency:T.state("")},this.user={name:T.state(""),email:T.state(""),balance:T.state(0)},this.stats={cpu:T.state(0),memory:T.state(0),disk:T.state(0),timer:0},this.storage={enable:T.state(!1),uploading:T.state(-1)},this.clipboard={enable:T.state(!1)},this.props=t,"vnc"===this.props.software)?this.software=new I:this.software=new P,console.log(`dxflow toolbar version ${t.version}`),this}async updateNamespace(){if(!this.props.namespace?.pointer)return;let t=Date.now();try{let e=await fetch(`/${V.target}/.reroute/orchestrator/namespaces/${this.props.namespace.pointer}/?v=${t}`,{method:"GET"}),a=await e.json();this.namespace.name.val=a?.name}catch(t){console.error("Failed to update namespace",t)}try{let e=await fetch(`/${V.target}/.reroute/orchestrator/namespaces/${this.props.namespace.pointer}/settings/?v=${t}`,{method:"GET"}),a=await e.json();this.namespace.currency.val=a?.currency}catch(t){console.error("Failed to update namespace settings",t)}}async updateUser(){if(!this.props.user?.pointer)return;let t=Date.now();try{let e=await fetch(`/${V.target}/.reroute/orchestrator/users/${this.props.user.pointer}/?v=${t}`,{method:"GET"}),a=await e.json();this.user.name.val=a?.name,this.user.email.val=a?.email,this.user.balance.val=Number(a?.balance)||0}catch(t){console.error("Failed to update user",t)}}async updateStats(){let t=Date.now()-3e5;try{let e=await fetch(`/${V.target}/.reroute/api/containers/${V.target}/stats/?type=LAST&from=${t}&duration=60000&limit=5`,{method:"GET"}),a=await e.json();this.stats.cpu.val=k(a?.cpu?.[a?.cpu?.length-1]?.value||0,.05,100),this.stats.memory.val=k(a?.memory?.[a?.memory?.length-1]?.value||0,.05,100)}catch(t){console.error("Failed to update cpu and memory stats",t)}try{let e=await fetch(`/${V.target}/.reroute/api/host/stats/?type=LAST&resources=disk&from=${t}&duration=60000&limit=5`,{method:"GET"}),a=await e.json();this.stats.disk.val=k(a?.disk?.[a?.disk?.length-1]?.value||0,.05,100)}catch(t){console.error("Failed to update disk stats",t)}}startStatsTimer(){clearInterval(this.stats.timer),this.stats.timer=setInterval(()=>{this.updateStats()},15e4)}stopStatsTimer(){clearInterval(this.stats.timer)}async initClipboard(){if(this.software.clipboard.enable){let t=document.querySelector(".dxf-toolbar-clipboard-textarea"),e=document.querySelector(".dxf-toolbar-clipboard-placeholder");this.software.clipboard.receive=a=>{this.area.visible.val&&(t&&(t.value=a),e&&(e.style.opacity="0"),a&&a.startsWith("/volume/")&&!a.endsWith("/")&&this.doanloadFromStorage(a.replace(/^\/volume\//,"")))},this.clipboard.enable.val=!0}}async initStorage(){if(this.software.storage.enable)try{let t=await fetch(`/${V.target}/.reroute/storage/healthcheck/`,{method:"GET"});200==t.status&&(this.storage.enable.val=!0)}catch(t){console.error("Failed to initialize storage",t)}}async generateStoragePresignedUrl(t,e){try{let a=await fetch(`/${V.target}/.reroute/storage/transfer/?path=${t}`,{method:"download"==e?"GET":"PUT"}),r=await a.json();return new URL(r?.url)}catch(t){console.error("Failed to generate storage presigned url",t)}}async doanloadFromStorage(t){let e=document.querySelector(".dxf-toolbar-clipboard-link"),a=await this.generateStoragePresignedUrl(t,"download");e&&a&&(e.download=t.split("/").pop(),e.href=a.pathname+a.search,e.click())}async uploadToStorage(t){let e;if(-1!==this.storage.uploading.val)return;this.storage.uploading.val=0;let a=await this.generateStoragePresignedUrl(t.name,"upload");if(!a){this.storage.uploading.val=-1;return}await U(1500);let r=new XMLHttpRequest,o=t=>{let e=Math.round(t);e>this.storage.uploading.val&&(this.storage.uploading.val=e)},s=()=>{this.storage.uploading.val=100,clearTimeout(e),e=setTimeout(()=>{this.storage.uploading.val=-1},2500)},l=t=>{this.storage.uploading.val=-1,console.error(t)};r.upload.onprogress=e=>{e.loaded&&o(e.loaded/t.size*100)},r.onload=()=>{200==r.status?s():l(`Failed to upload ${t.name} - ${r.status}`)},r.onerror=()=>{l(`Failed to upload ${t.name}`)},r.open("PUT",a.pathname+a.search,!0),r.send(t)}async closeInteractiveSession(){let e=Date.now();try{await fetch(`/${V.target}/.reroute/proxy/remove/?v=${e}`,{method:"GET"}),function(){let e=t(A).get();for(let a in e)a.startsWith("dxf-")&&t(A).remove(a,{path:`/${V.target}/`})}(),window.location.href="/"}catch{}}createMainElement(){return L({class:()=>e("dxf-toolbar",`dxf-toolbar--theme-${this.props.theme}`)})}createLoadingElement(){return L({class:()=>e("dxf-toolbar-loading",{"dxf-toolbar-loading--enable":this.loading.enable.val,"dxf-toolbar-loading--visible":this.loading.visible.val},`dxf-toolbar-loading--theme-${this.props.theme}`)},R({class:()=>e("dxf-toolbar-loading-icon",`dxf-toolbar-loading-icon--theme-${this.props.theme}`),src:"/logo.svg"}),N({class:"dxf-toolbar-loading-text"},"PLEASE WAIT"))}createAreaElement(){return L({class:()=>e("dxf-toolbar-area",{"dxf-toolbar-area--enable":this.area.enable.val&&!this.loading.enable.val,"dxf-toolbar-area--visible":this.area.visible.val},`dxf-toolbar-area--position-${this.props.position}`)})}createTriggerElement(){return L({class:"dxf-toolbar-trigger",onclick:()=>{this.toggleArea()}},R({class:()=>e("dxf-toolbar-trigger-icon",`dxf-toolbar-trigger-icon--theme-${this.props.theme}`),src:"/logo.svg"}))}createWrapperElement(){return L({class:()=>e("dxf-toolbar-wrapper",`dxf-toolbar-wrapper--position-${this.props.position}`)},L({class:()=>e("dxf-toolbar-wrapper-indicator",`dxf-toolbar-wrapper-indicator--position-${this.props.position}`)}))}createHeaderElement(){return L({class:"dxf-toolbar-header"},R({class:"dxf-toolbar-header-avatar",alt:()=>this.user.name.val,src:()=>`https://www.gravatar.com/avatar/${t(a)(this.user.email.val)}?s=76&d=identicon`}),L({class:"dxf-toolbar-header-content"},N({class:"dxf-toolbar-header-title"},()=>this.user.name.val||"Anonymous"),N({class:"dxf-toolbar-header-subtitle"},()=>0!==this.user.balance.val?`${Math.round(100*this.user.balance.val)/100} ${this.namespace.currency.val.toUpperCase()}`:this.user.email.val||"~")))}createStatsElement(){let t=L({class:"dxf-toolbar-stat-steps"},...[1,2,3,4,5].map(t=>L({class:()=>`dxf-toolbar-stat-step dxf-toolbar-stat-step--${t}`})));return L({class:"dxf-toolbar-stats"},L({class:()=>{let t=0;return this.stats.cpu.val&&(t=Math.ceil(this.stats.cpu.val/20)),e("dxf-toolbar-stat",`dxf-toolbar-stat--step-${t}`)}},G({class:"dxf-toolbar-stat-icon",viewBox:"0 0 24 24"},O({d:"M7 10c0-1.414 0-2.121.44-2.56C7.878 7 8.585 7 10 7h4c1.414 0 2.121 0 2.56.44c.44.439.44 1.146.44 2.56v4c0 1.414 0 2.121-.44 2.56c-.439.44-1.146.44-2.56.44h-4c-1.414 0-2.121 0-2.56-.44C7 16.122 7 15.415 7 14z",opacity:.5}),O({d:"M4 12c0-3.771 0-5.657 1.172-6.828S8.229 4 12 4s5.657 0 6.828 1.172S20 8.229 20 12s0 5.657-1.172 6.828S15.771 20 12 20s-5.657 0-6.828-1.172S4 15.771 4 12Z"}),O({d:"M4 12H2m20 0h-2M4 9H2m20 0h-2M4 15H2m20 0h-2m-8 5v2m0-20v2M9 20v2M9 2v2m6 16v2m0-20v2"})),N({class:"dxf-toolbar-stat-label"},"CPU"),N({class:"dxf-toolbar-stat-value"},()=>`${this.stats.cpu.val||"~"}%`),()=>t.cloneNode(!0)),L({class:()=>{let t=0;return this.stats.memory.val&&(t=Math.ceil(this.stats.memory.val/20)),e("dxf-toolbar-stat",`dxf-toolbar-stat--step-${t}`)}},G({class:"dxf-toolbar-stat-icon",viewBox:"0 0 24 24"},O({d:"M2 11c0-2.828 0-4.243.879-5.121C3.757 5 5.172 5 8 5h8c2.828 0 4.243 0 5.121.879C22 6.757 22 8.172 22 11c0 3.771 0 5.657-1.172 6.828S17.771 19 14 19h-4c-3.771 0-5.657 0-6.828-1.172S2 14.771 2 11Z"}),O({d:"M6 10.5h12M6 13.5h12",opacity:.5})),N({class:"dxf-toolbar-stat-label"},"Memory"),N({class:"dxf-toolbar-stat-value"},()=>`${this.stats.memory.val||"~"}%`),()=>t.cloneNode(!0)),L({class:()=>{let t=0;return this.stats.disk.val&&(t=Math.ceil(this.stats.disk.val/20)),e("dxf-toolbar-stat",`dxf-toolbar-stat--step-${t}`)}},G({class:"dxf-toolbar-stat-icon",viewBox:"0 0 24 24"},O({d:"M3.464 20.536C4.93 22 7.286 22 12 22s7.071 0 8.535-1.465C22 19.072 22 16.714 22 12c0-.341 0-.512-.015-.686a4.04 4.04 0 0 0-.921-2.224a8 8 0 0 0-.483-.504l-5.167-5.167a9 9 0 0 0-.504-.483a4.04 4.04 0 0 0-2.224-.92C12.512 2 12.342 2 12 2C7.286 2 4.929 2 3.464 3.464C2 4.93 2 7.286 2 12s0 7.071 1.464 8.535Z"}),O({d:"M17 22v-1c0-1.886 0-2.828-.586-3.414S14.886 17 13 17h-2c-1.886 0-2.828 0-3.414.586S7 19.114 7 21v1"}),O({d:"M7 8h6",opacity:.5})),N({class:"dxf-toolbar-stat-label"},"Disk"),N({class:"dxf-toolbar-stat-value"},()=>`${this.stats.disk.val||"~"}%`),()=>t.cloneNode(!0)))}createClipboardElement(){return L({class:()=>e("dxf-toolbar-clipboard",{"dxf-toolbar-clipboard--enable":this.clipboard.enable.val})},q({class:"dxf-toolbar-clipboard-textarea",onfocus:()=>{let t=document.querySelector(".dxf-toolbar-clipboard-placeholder");t&&(t.style.display="none")},onchange:t=>{this.software.clipboard.send&&this.software.clipboard.send(t.target?.value)},onblur:t=>{let e=document.querySelector(".dxf-toolbar-clipboard-placeholder");e&&(e.style.display=t.target?.value?"none":"flex")}}),D({class:"dxf-toolbar-clipboard-link"}),W({class:"dxf-toolbar-clipboard-input",type:"file",onchange:async t=>{await this.uploadToStorage(t.target.files[0]),t.target.value=""}}),L({class:"dxf-toolbar-clipboard-placeholder"},G({class:"dxf-toolbar-clipboard-placeholder-icon",viewBox:"0 0 24 24"},O({d:"M16 4.002c2.175.012 3.353.109 4.121.877C21 5.758 21 7.172 21 10v6c0 2.829 0 4.243-.879 5.122C19.243 22 17.828 22 15 22H9c-2.828 0-4.243 0-5.121-.878C3 20.242 3 18.829 3 16v-6c0-2.828 0-4.242.879-5.121c.768-.768 1.946-.865 4.121-.877",opacity:.5}),O({d:"M7 12.5h8"}),O({d:"M7 16h5.5",opacity:.5}),O({d:"M8 3.5A1.5 1.5 0 0 1 9.5 2h5A1.5 1.5 0 0 1 16 3.5v1A1.5 1.5 0 0 1 14.5 6h-5A1.5 1.5 0 0 1 8 4.5z"})),N({class:"dxf-toolbar-clipboard-placeholder-text"},"Clipboard")))}createFooterElement(){return L({class:"dxf-toolbar-footer"},L({class:()=>e("dxf-toolbar-footer-button",{"dxf-toolbar-footer-button--enable":this.storage.enable.val,"dxf-toolbar-footer-button--loading":-1!==this.storage.uploading.val},"dxf-toolbar-footer-button--upload"),onclick:()=>{let t=document.querySelector(".dxf-toolbar-clipboard-input");t&&-1===this.storage.uploading.val&&t.click()}},L({class:"dxf-toolbar-footer-button-indicator",style:()=>`top: ${k(32-32*this.storage.uploading.val/100,1,32)}px`}),()=>-1!==this.storage.uploading.val?N({class:"dxf-toolbar-footer-button-label"},()=>N({},k(this.storage.uploading.val,1,100),B({},"%"))):G({class:"dxf-toolbar-footer-button-icon",viewBox:"0 0 24 24"},O({d:"M6.286 19C3.919 19 2 17.104 2 14.765s1.919-4.236 4.286-4.236q.427.001.83.08m7.265-2.582a5.8 5.8 0 0 1 1.905-.321c.654 0 1.283.109 1.87.309m-11.04 2.594a5.6 5.6 0 0 1-.354-1.962C6.762 5.528 9.32 3 12.476 3c2.94 0 5.361 2.194 5.68 5.015m-11.04 2.594a4.3 4.3 0 0 1 1.55.634m9.49-3.228C20.392 8.78 22 10.881 22 13.353c0 2.707-1.927 4.97-4.5 5.52",opacity:.5}),O({d:"M12 16v6m0-6l2 2m-2-2l-2 2"}))),L({class:"dxf-toolbar-footer-button dxf-toolbar-footer-button--enable dxf-toolbar-footer-button--close",onclick:()=>{this.closeInteractiveSession()}},"Close Interactive Session"))}hideLoading(){this.loading.visible.val=!1,setTimeout(()=>{this.loading.enable.val=!1},500)}enableArea(){this.area.enable.val=!0,this.updateNamespace(),this.updateUser(),this.updateStats()}showArea(){this.area.visible.val=!0,this.startStatsTimer()}hideArea(){this.area.visible.val=!1,this.stopStatsTimer()}toggleArea(){this.area.visible.val?this.hideArea():this.showArea()}async render(t=document.body,e=1e3){let a=this.createMainElement(),r=this.createLoadingElement(),o=this.createAreaElement(),s=this.createTriggerElement(),l=this.createWrapperElement(),n=this.createHeaderElement(),i=this.createStatsElement(),c=this.createClipboardElement(),d=this.createFooterElement();T.add(l,n,i,c,d),T.add(o,s,l),T.add(a,r,o),T.add(t,a),await this.software.init(),await this.initClipboard(),await this.initStorage(),setTimeout(async()=>{this.enableArea(),await this.software.handle(),this.hideLoading()},e)}}({version:"1.0.0",get theme(){let t=F("dxf-toolbar-theme");if("light"===t||"dark"===t)return t;return"dark"},get position(){let t=F("dxf-toolbar-position");if("top-left"===t||"top-right"===t||"bottom-left"===t||"bottom-right"===t)return t;return"top-right"},get software(){let t=F("dxf-toolbar-software");if("vnc"===t)return t;return"other"},get namespace(){return{pointer:F("dxf-toolbar-namespace-pointer")}},get user(){return{pointer:F("dxf-toolbar-user-pointer")}}});H.render(),window.dxfToolbar=H}();